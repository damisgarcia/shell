"use strict";Math.invert=function(e){return e*-1},angular.module("shellderApp",["ngFileUpload"]),$(document).ready(function(e){angular.bootstrap(document.body,["shellderApp"])});var ApplicationCtrl=function(){var e=this;return console.log("Loaded!"),e};angular.module("shellderApp").controller("ApplicationCtrl",ApplicationCtrl),angular.module("shellderApp").filter("range",function(){return function(e,t){t=parseInt(t);for(var n=0;n<t;n++)e.push(n);return e}});var shLayoutCtrl=function(e){var t=this;return t.$onInit=function(){angular.forEach(t.data,function(e){angular.isObject(e)})},t};shLayoutCtrl.$inject=[];var shLayout={bidding:{data:"="},controller:shLayoutCtrl};angular.module("shellderApp").component("shLayout",shLayout);var shLayoutsCtrl=function(e){var t=this;return t.update=function(t){e.$emit("update:layout",t)},t.layouts=[[{type:"flex-row",value:1}],[{type:"flex-column",value:2}],[{type:"flex-column",value:3}],[{type:"flex-column",value:4}],[{type:"flex-row",value:2}],[{type:"flex-row",value:3}],[{type:"flex-row",value:2},{type:"flex-row",value:2}],[{type:"flex-row",value:1},{type:"flex-row",value:2},{type:"flex-row",value:1}],[{type:"flex-row",value:1},{type:"flex-row",value:3},{type:"flex-row",value:1}],[{type:"flex-row",value:2},{type:"flex-row",value:1},{type:"flex-row",value:2}],[{type:"flex-row",value:3},{type:"flex-row",value:1},{type:"flex-row",value:2}],[{type:"flex-row",value:2},{type:"flex-row",value:1},{type:"flex-row",value:3}]],t};shLayoutsCtrl.$inject=["$scope"];var shLayouts={controller:shLayoutsCtrl,templateUrl:"templates/sh-layouts.html"};angular.module("shellderApp").component("shLayouts",shLayouts);var shDeviceCtrl=function(e,t){var n=this,r=e;return n.layout=[{type:"flex-row",value:1}],window.addEventListener("drop",function(e){e=e||event,e.preventDefault(),$(r).find(".device").removeClass("dragover")},!1),window.addEventListener("dragover",function(e){e=e||event,e.preventDefault()},!1),window.addEventListener("dragend",function(e){e=e||event,e.preventDefault(),$(r).find(".device").removeClass("dragover")},!1),window.addEventListener("dragenter",function(e){e=e||event,e.preventDefault(),$(r).find(".device").addClass("dragover")},!1),t.$on("update:layout",function(e,t){n.layout=t}),n};shDeviceCtrl.$inject=["$element","$rootScope"];var shDevice={templateUrl:"templates/sh-device.html",controller:shDeviceCtrl};angular.module("shellderApp").component("shDevice",shDevice);var shFragmentCtrl=function(e,t){var n=this,r=t;n.loadPicture=function(e){n.file=e,n.left=0,n.top=0,n.scale=1,n.element=r,r.parent().removeClass("dragover")},n.toggleSetting=function(){n.$setting=!n.$setting,n.$editing=!n.$editing,n.$setting?e.$emit("fragment:setting:enable",n):e.$emit("fragment:setting:enable",null)}};shFragmentCtrl.$inject=["$scope","$element"];var shFragment={templateUrl:"templates/sh-fragment.html",controller:shFragmentCtrl};angular.module("shellderApp").component("shFragment",shFragment);var shFragmentSettingCtrl=function(e,t){var n=this,r=.02,a=null,l=null,o=function(e){return e*-1};return n.moveLeft=function(e){n.fragment.left<0&&(n.fragment.left+=a*r)},n.moveRight=function(e){n.fragment.left>o(a)&&(n.fragment.left-=a*r)},n.moveTop=function(e){n.fragment.top>o(l)&&(n.fragment.top+=n.fragment.element.find("img").height()*r)},n.moveBottom=function(e){n.fragment.top<l&&(n.fragment.top-=n.fragment.element.find("img").height()*r)},e.$on("fragment:setting:enable",function(t,r){n.fragment=r,angular.isObject(n.fragment)?(e.$editing=!0,a=n.fragment.element.find("img").width(),l=n.fragment.element.find("img").height()):e.$editing=!1}),n};shFragmentSettingCtrl.$inject=["$rootScope","$element"];var shFragmentSetting={templateUrl:"templates/sh-fragment-setting.html",controller:shFragmentSettingCtrl};angular.module("shellderApp").component("shFragmentSetting",shFragmentSetting),angular.module("shellderApp").directive("shFragmentDraggable",["$document",function(e){return{scope:{shFragmentDraggable:"=",parent:"@"},link:function(t,n,r){function a(e){g=e.pageY-u,i=e.pageX-o,t.shFragmentDraggable.top=g,t.shFragmentDraggable.left=i,t.$apply()}function l(){e.off("mousemove",a),e.off("mouseup",l)}var o=0,u=0,i=0,g=0;n.on("mousedown",function(n){n.preventDefault(),g=t.shFragmentDraggable.top,i=t.shFragmentDraggable.left,o=n.pageX-i,u=n.pageY-g,e.on("mousemove",a),e.on("mouseup",l)}),t.parent&&n.closest(t.parent).on("mousedown",function(n){n.preventDefault(),t.shFragmentDraggable.$setting&&(o=n.pageX-i,u=n.pageY-g,e.on("mousemove",a),e.on("mouseup",l))})}}}]);